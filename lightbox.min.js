let imgIndex,images=document.querySelectorAll("img"),imgInside=[],lightBlock=document.getElementById("light-block"),imgCount=document.querySelector(".img-count"),closeBox=document.querySelector(".close-lightbox"),switchBox=document.querySelector(".switch-box"),switches=document.querySelectorAll(".switch");function cloneCreate(e){let t=images[e].cloneNode(!0);lightBlock.appendChild(t),t.setAttribute("class","lightbox-lib-img"),t.width=Math.floor(window.innerWidth/2),imgInside.push(t),imgIndex=e,imgCount.textContent=`Image ${imgIndex+1} of ${images.length-1}`,t.addEventListener("mouseover",showSwitchBox),t.addEventListener("mouseout",hideSwitchBox),switchBox.style.width=`${t.width-20}px`}function hideBlock(){lightBlock.classList.remove("lightbox-block-show"),emptyBlock()}function emptyBlock(){imgInside.forEach(e=>{e.remove()}),imgInside=[]}function showSwitchBox(){2!=images.length&&switchBox.classList.add("open-switch")}function hideSwitchBox(){switchBox.classList.remove("open-switch")}function showHideSwitch(e,t){switches[t].style.transform=e}function rightSwitch(){emptyBlock(),imgIndex==images.length-3?(cloneCreate(imgIndex+1),showHideSwitch("scale(0)",1)):(cloneCreate(imgIndex+1),showHideSwitch("scale(1)",1),showHideSwitch("scale(1)",0))}function leftSwitch(){1==imgIndex?(cloneCreate(imgIndex-1),showHideSwitch("scale(0)",0)):(cloneCreate(imgIndex-1),showHideSwitch("scale(1)",0),showHideSwitch("scale(1)",1))}images.forEach((e,t)=>{e.addEventListener("click",()=>{e.classList.contains("lightbox-img-close")?hideBlock():(lightBlock.classList.add("lightbox-block-show"),cloneCreate(t))})}),closeBox.addEventListener("click",hideBlock),switchBox.addEventListener("mouseover",showSwitchBox),window.addEventListener("load",showHideSwitch("scale(0)",0)),document.addEventListener("keydown",e=>{switch(emptyBlock(),e.keyCode){case 39:imgIndex==images.length-2?cloneCreate(imgIndex):rightSwitch();break;case 37:0==imgIndex?cloneCreate(imgIndex):leftSwitch();break;default:cloneCreate(imgIndex)}}),switches.forEach(e=>{e.addEventListener("click",()=>{switch(emptyBlock(),e.classList.contains("switch-right")){case!0:rightSwitch();break;case!1:leftSwitch()}})});